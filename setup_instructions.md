# 千葉英和高校生徒会公式サイト セットアップ手順

## 概要

このドキュメントでは、千葉英和高校生徒会公式サイトの完全なセットアップ手順を説明します。システムは以下の要素で構成されています：

- **フロントエンド**: React.jsアプリケーション
- **バックエンド**: Google Apps Script (GAS)
- **データベース**: Googleスプレッドシート
- **ファイルストレージ**: Google Drive
- **データ投稿**: Googleフォーム

## 1. Googleスプレッドシートの設定

### 1.1 スプレッドシートの作成

1. [Google Drive](https://drive.google.com)にアクセス
2. 「新規」→「Googleスプレッドシート」を選択
3. スプレッドシート名を「千葉英和高校生徒会データ」に変更

### 1.2 シートの作成と設定

以下の3つのシートを作成し、それぞれにヘッダー行を設定してください：

#### 活動報告シート
| ID | タイトル | 日付 | カテゴリー | 内容 | 画像URL |
|----|----------|------|------------|------|---------|

#### お知らせシート
| ID | タイトル | 日付 | カテゴリー | 重要 | 内容 |
|----|----------|------|------------|------|------|

#### 提出物シート
| 提出日時 | 氏名 | 学年・クラス | ファイル名 | ファイルURL |
|----------|------|--------------|------------|-------------|

### 1.3 サンプルデータの投入

#### 活動報告シートのサンプルデータ
```
1	文化祭実行委員会の募集について	2025-10-05	行事	今年度の文化祭実行委員を募集しています。多くの皆さんの参加をお待ちしています。	
2	生徒会役員選挙の実施について	2025-10-03	選挙	来年度の生徒会役員選挙を実施します。立候補の受付を開始しました。	
3	地域清掃ボランティア活動報告	2025-10-01	ボランティア	先日実施した地域清掃活動に多くの生徒が参加しました。地域の方々からも感謝の言葉をいただきました。	
```

#### お知らせシートのサンプルデータ
```
1	体育祭の日程変更について	2025-10-06	緊急	TRUE	天候の影響により、体育祭の日程を変更いたします。詳細は後日お知らせします。
2	図書委員会からのお知らせ	2025-10-04	委員会	FALSE	新刊図書の紹介と図書館利用についてのお知らせです。
3	制服着用についての注意事項	2025-10-02	生活指導	FALSE	制服の正しい着用方法について改めてお知らせします。
```

## 2. Google Driveフォルダの設定

1. [Google Drive](https://drive.google.com)にアクセス
2. 新しいフォルダを作成し、「生徒会提出物」と命名
3. フォルダのURLからフォルダIDをコピー（`https://drive.google.com/drive/folders/` の後の部分）

## 3. Google Apps Scriptの設定

### 3.1 Apps Scriptプロジェクトの作成

1. [Google Apps Script](https://script.google.com)にアクセス
2. 「新しいプロジェクト」をクリック
3. プロジェクト名を「千葉英和高校生徒会バックエンド」に変更

### 3.2 コードの設定

1. `gas_backend.gs` ファイルの内容をコピー
2. Apps Scriptエディタに貼り付け
3. `SPREADSHEET_ID` と `FOLDER_ID` を実際の値に置き換え

### 3.3 デプロイ

1. 「デプロイ」→「新しいデプロイ」を選択
2. 「種類の選択」で「ウェブアプリ」を選択
3. 以下の設定を行う：
   - 説明: 千葉英和高校生徒会公式サイトバックエンド
   - 実行者: 自分
   - アクセスできるユーザー: 全員
4. 「デプロイ」をクリックし、承認を完了
5. 生成されたウェブアプリURLをコピー

## 4. Googleフォームの作成（オプション）

### 4.1 活動報告投稿フォーム

1. [Google Forms](https://forms.google.com)にアクセス
2. 新しいフォームを作成し、「活動報告投稿フォーム」と命名
3. 以下の質問を追加：
   - タイトル（記述式）
   - 日付（日付）
   - カテゴリー（選択式：行事、会議、ボランティア、地域交流、その他）
   - 内容（段落）
   - 画像URL（記述式、任意）

### 4.2 お知らせ投稿フォーム

1. 新しいフォームを作成し、「お知らせ投稿フォーム」と命名
2. 以下の質問を追加：
   - タイトル（記述式）
   - 日付（日付）
   - カテゴリー（選択式：緊急、委員会、生活指導、行事、その他）
   - 重要なお知らせ（選択式：はい、いいえ）
   - 内容（段落）

### 4.3 フォームとスプレッドシートの連携

1. 各フォームで「回答」タブ→「スプレッドシートを作成」を選択
2. 既存のスプレッドシートを選択し、適切なシートに連携

## 5. フロントエンドの設定

### 5.1 APIエンドポイントの更新

`src/services/api.js` ファイルの `GAS_WEB_APP_URL` を実際のWebアプリURLに更新してください。

### 5.2 開発サーバーの起動

```bash
cd chiba-eiwa-student-council
pnpm run dev --host
```

## 6. システムテスト

### 6.1 データ取得テスト

1. ブラウザで `http://localhost:5173` にアクセス
2. ホームページで活動報告とお知らせが表示されることを確認
3. 活動報告ページでフィルタリング機能をテスト
4. お知らせページでフィルタリング機能をテスト

### 6.2 ファイルアップロードテスト

1. 提出物ページにアクセス
2. テスト用のPDFまたは画像ファイルをアップロード
3. 名前と学年・クラスを入力して提出
4. Google Driveとスプレッドシートに正しく記録されることを確認

## 7. 本番デプロイ

### 7.1 ビルド

```bash
pnpm run build
```

### 7.2 デプロイオプション

- **Vercel**: `vercel --prod`
- **Netlify**: `netlify deploy --prod --dir=dist`
- **GitHub Pages**: リポジトリ設定でPages機能を有効化

## 8. 運用手順

### 8.1 活動報告の投稿

1. Googleフォームから投稿するか、直接スプレッドシートに入力
2. サイトの「更新」ボタンをクリックして最新データを取得

### 8.2 お知らせの投稿

1. Googleフォームから投稿するか、直接スプレッドシートに入力
2. 重要なお知らせは「重要」列を `TRUE` に設定
3. サイトの「更新」ボタンをクリックして最新データを取得

### 8.3 提出物の管理

1. 提出されたファイルはGoogle Driveの指定フォルダに保存
2. 提出者情報はスプレッドシートの「提出物」シートで確認
3. 必要に応じてファイルをダウンロードして確認

## 9. トラブルシューティング

### 9.1 データが表示されない場合

1. Google Apps ScriptのWebアプリURLが正しく設定されているか確認
2. スプレッドシートの共有設定を確認（リンクを知っている全員が閲覧可能）
3. ブラウザの開発者ツールでエラーメッセージを確認

### 9.2 ファイルアップロードが失敗する場合

1. ファイル形式とサイズ制限を確認
2. Google DriveフォルダIDが正しく設定されているか確認
3. Apps Scriptの実行権限を確認

## 10. セキュリティ考慮事項

- スプレッドシートとGoogle Driveフォルダのアクセス権限を適切に設定
- 機密情報は投稿しないよう注意喚起
- 定期的にアクセスログを確認
- 不適切な投稿があった場合の削除手順を整備

## サポート

技術的な問題が発生した場合は、以下の情報を含めてお問い合わせください：

- エラーメッセージの詳細
- 操作手順
- ブラウザとOSの情報
- スクリーンショット（可能であれば）
